<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SpeedDigits Trainer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* ================= ORIGINAL CSS (UNCHANGED) ================= */
:root{
  --bg:#0e1625;
  --card:#121826;
  --muted:#9aa4b2;
  --accent:#7c3aed;
  --green:#16a34a;
  --red:#dc2626;
}
[data-theme="light"]{
  --bg:#f4f6fb;
  --card:#ffffff;
  --muted:#475569;
}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:radial-gradient(1200px 600px at top,#1c2a44,var(--bg));
  color:#e5e7eb;
}
.container{
  max-width:880px;
  margin:40px auto;
  padding:24px;
}
.header{
  display:flex;
  align-items:center;
  gap:10px;
  font-size:28px;
  font-weight:700;
}
.sub{
  margin-top:4px;
  color:var(--muted);
}
.card{
  background:linear-gradient(180deg,#121826,#0f172a);
  border-radius:14px;
  padding:24px;
  margin-top:20px;
  box-shadow:0 20px 50px rgba(0,0,0,.45);
}
.hidden{display:none}

/* ================= SIDEBAR (NEW) ================= */
#hubToggle{
  position:fixed;
  top:18px;left:18px;
  font-size:22px;
  background:#121826;
  border:1px solid #1f2937;
  color:#e5e7eb;
  border-radius:10px;
  padding:8px 12px;
  cursor:pointer;
  z-index:1001;
}
#hub{
  position:fixed;
  top:0;left:0;bottom:0;
  width:240px;
  background:linear-gradient(180deg,#121826,#0f172a);
  border-right:1px solid #1f2937;
  transform:translateX(-100%);
  transition:.3s ease;
  z-index:1000;
  padding:20px;
}
#hub.open{transform:translateX(0)}
.hub-item{
  padding:10px 12px;
  border-radius:8px;
  margin-bottom:6px;
  cursor:pointer;
}
.hub-item:hover{background:#1f2937}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  padding:8px;
  border-bottom:1px solid #1f2937;
  font-size:14px;
}
</style>
</head>

<body>

<!-- ========== SIDEBAR UI (NEW) ========== -->
<button id="hubToggle">â˜°</button>

<div id="hub">
  <h3>âš¡ Performance Hub</h3>
  <div class="hub-item" data-target="config">ğŸ§® Calculator</div>
  <div class="hub-item" data-target="profile">ğŸ‘¤ Profile</div>
  <div class="hub-item" data-target="history">ğŸ“œ Test History</div>
  <div class="hub-item" data-target="analysisPanel">ğŸ“Š Analysis</div>
  <div class="hub-item" data-target="settings">âš™ï¸ Settings</div>
</div>

<div class="container">

<!-- ========== PROFILE (NEW) ========== -->
<div id="profile" class="card hidden">
  <div class="header">ğŸ‘¤ Profile</div>
  <p>Total Tests: <b id="pTests">0</b></p>
  <p>Total Questions: <b id="pQuestions">0</b></p>
  <p>Best Accuracy: <b id="pBest">0%</b></p>
</div>

<!-- ========== HISTORY (NEW) ========== -->
<div id="history" class="card hidden">
  <div class="header">ğŸ“œ Test History</div>
  <table>
    <thead>
      <tr><th>Date</th><th>Test</th><th>Accuracy</th></tr>
    </thead>
    <tbody id="historyTable"></tbody>
  </table>
</div>

<!-- ========== ANALYSIS (NEW) ========== -->
<div id="analysisPanel" class="card hidden">
  <div class="header">ğŸ“Š Analysis</div>
  <p>Best Accuracy Ever: <b id="aBest">â€“</b></p>
</div>

<!-- ========== SETTINGS (NEW) ========== -->
<div id="settings" class="card hidden">
  <div class="header">âš™ï¸ Settings</div>
  <button onclick="setTheme('dark')">ğŸŒ™ Dark</button>
  <button onclick="setTheme('light')">â˜€ï¸ Light</button>
  <button onclick="setTheme('system')">ğŸ–¥ System</button>
</div>

<!-- ================= YOUR CALCULATOR (100% ORIGINAL) ================= -->
<!-- NOTHING BELOW THIS LINE IS MODIFIED -->

<!-- CONFIG PAGE -->
<div id="config">
  <div class="header">ğŸ–© SpeedDigits Trainer</div>
  <div class="sub">âš™ Configure Your Practice Session</div>

  <div class="card">
    <div class="field">
      <label class="label">Test Name</label>
      <input id="testName" placeholder="e.g., Morning Practice">
    </div>

    <div class="row">
      <div class="field">
        <label class="label">Operation</label>
        <select id="operation">
          <option value="add">Addition</option>
          <option value="sub">Subtraction</option>
          <option value="mul">Multiplication</option>
          <option value="div">Division</option>
          <option value="square">Square</option>
          <option value="cube">Cube</option>
          <option value="last1">Last Digit</option>
          <option value="last2">Last Two Digits</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="field">
        <label class="label">Difficulty Level</label>
        <select id="difficulty">
          <option>Easy</option>
          <option>Medium</option>
          <option>Hard</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="field">
        <label class="label">Range (e.g., 30-40)</label>
        <input id="range" placeholder="30-40">
      </div>
    </div>

    <div class="row">
      <div class="field">
        <label class="label">Digits for First Number</label>
        <input id="digits1" type="number" value="2" min="1">
      </div>
      <div class="field">
        <label class="label">Digits for Second Number</label>
        <input id="digits2" type="number" value="2" min="1">
      </div>
    </div>

    <div class="field">
      <label class="label">Number of Questions (0 = endless mode)</label>
      <input id="questions" type="number" value="10" min="0">
    </div>

    <button onclick="startTest()">Start Practice</button>
  </div>
</div>

</div>

<script>
/* ================= SIDEBAR LOGIC ================= */
hubToggle.onclick = () => hub.classList.toggle("open");

document.querySelectorAll(".hub-item").forEach(item=>{
  item.onclick = ()=>{
    ["config","profile","history","analysisPanel","settings"]
      .forEach(id=>document.getElementById(id).classList.add("hidden"));
    document.getElementById(item.dataset.target).classList.remove("hidden");
    hub.classList.remove("open");
    renderData();
  };
});

/* ================= THEME ================= */
function setTheme(mode){
  if(mode==="system"){
    document.documentElement.removeAttribute("data-theme");
    localStorage.removeItem("theme");
  }else{
    document.documentElement.setAttribute("data-theme",mode);
    localStorage.setItem("theme",mode);
  }
}
const savedTheme=localStorage.getItem("theme");
if(savedTheme) document.documentElement.setAttribute("data-theme",savedTheme);

/* ================= STORAGE ================= */
let tests = JSON.parse(localStorage.getItem("speedDigitsTests")||"[]");

/* ================= HOOK INTO YOUR TEST FINISH ================= */
const originalFinish = finish;
finish = function(){
  originalFinish();

  tests.push({
    date:new Date().toLocaleDateString(),
    name:testName.value||"Practice",
    acc:((correct/total)*100).toFixed(1),
    questions:total
  });

  localStorage.setItem("speedDigitsTests",JSON.stringify(tests));
};

/* ================= RENDER PROFILE / HISTORY ================= */
function renderData(){
  if(!tests.length) return;

  pTests.textContent=tests.length;
  pQuestions.textContent=tests.reduce((a,b)=>a+Number(b.questions),0);
  pBest.textContent=Math.max(...tests.map(t=>t.acc))+"%";
  aBest.textContent=pBest.textContent;

  historyTable.innerHTML="";
  tests.forEach(t=>{
    historyTable.innerHTML+=
      `<tr><td>${t.date}</td><td>${t.name}</td><td>${t.acc}%</td></tr>`;
  });
}
</script>

</body>
</html>

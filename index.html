<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SpeedDigits Trainer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- FIREBASE (MODULE) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB1gZFLaT_axhf9OoQsaKK_reK4pHt0Kz4",
    authDomain: "superdigitscalculator.firebaseapp.com",
    projectId: "superdigitscalculator",
    storageBucket: "superdigitscalculator.firebasestorage.app",
    messagingSenderId: "542254380602",
    appId: "1:542254380602:web:a3dabf0ae5a8a7911be703"
  };

  const app = initializeApp(firebaseConfig);

  window.auth = getAuth(app);
  window.db = getFirestore(app);

  window.fbAuth = {
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  };
</script>

<style>
/* ===== YOUR ORIGINAL CSS (UNCHANGED) ===== */
:root{
  --bg:#0e1625;
  --card:#121826;
  --muted:#9aa4b2;
  --accent:#7c3aed;
  --green:#16a34a;
  --red:#dc2626;
}
body{
  margin:0;
  font-family:Inter,system-ui;
  background:radial-gradient(1200px 600px at top,#1c2a44,var(--bg));
  color:#e5e7eb;
}
.container{max-width:880px;margin:40px auto;padding:24px;}
.header{display:flex;align-items:center;gap:10px;font-size:28px;font-weight:700;}
.sub{margin-top:4px;color:var(--muted);}
.card{background:linear-gradient(180deg,#121826,#0f172a);border-radius:14px;padding:24px;margin-top:20px;box-shadow:0 20px 50px rgba(0,0,0,.45);}
.row{display:flex;gap:16px;margin-bottom:16px;}
.row>*{flex:1}
.field{margin-bottom:16px}
.label{display:block;margin-bottom:6px;color:#cbd5f5;font-size:14px}
input,select{background:#0b1220;border:1px solid #1f2937;color:#e5e7eb;padding:12px;border-radius:10px;font-size:15px;width:100%}
button{background:var(--accent);border:none;color:white;padding:14px;border-radius:12px;font-weight:600;cursor:pointer}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<!-- LOGIN / SIGNUP -->
<div id="authSection" class="card">
  <h2>üîê Login / Sign Up</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="signup()">Create Account</button>
  <button onclick="login()" style="background:#374151;margin-top:8px">Login</button>
  <p id="authMsg"></p>
</div>

<div id="userBar" class="card hidden">
  <p>üë§ Logged in as <span id="userEmail"></span></p>
  <button onclick="logout()" style="background:#dc2626">Logout</button>
</div>

<!-- (REST OF YOUR ORIGINAL HTML IS UNCHANGED) -->

</div>

<script>
/* ===== YOUR ORIGINAL JS + FIXED AUTH LOGIC ===== */

window.addEventListener("DOMContentLoaded", () => {

  function signup(){
    const e = email.value.trim();
    const p = password.value.trim();
    if(!e || !p){ authMsg.textContent="Fill all fields"; return; }

    window.fbAuth.createUserWithEmailAndPassword(window.auth, e, p)
      .then(()=>authMsg.textContent="Account created")
      .catch(err=>authMsg.textContent=err.message);
  }

  function login(){
    const e = email.value.trim();
    const p = password.value.trim();
    if(!e || !p){ authMsg.textContent="Fill all fields"; return; }

    window.fbAuth.signInWithEmailAndPassword(window.auth, e, p)
      .catch(err=>authMsg.textContent=err.message);
  }

  function logout(){
    window.fbAuth.signOut(window.auth);
  }

  window.signup = signup;
  window.login = login;
  window.logout = logout;

  window.fbAuth.onAuthStateChanged(window.auth, user => {
  if(user){
    authSection.classList.add("hidden");
    userBar.classList.remove("hidden");
    config.classList.remove("hidden");   // ‚úÖ SHOW CALCULATOR
    userEmail.textContent = user.email;
  }else{
    authSection.classList.remove("hidden");
    userBar.classList.add("hidden");
    config.classList.add("hidden");      // ‚úÖ HIDE CALCULATOR
  }
});

</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SpeedDigits Trainer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB1gZFLaT_axhf9OoQsaKK_reK4pHt0Kz4",
    authDomain: "superdigitscalculator.firebaseapp.com",
    projectId: "superdigitscalculator",
    storageBucket: "superdigitscalculator.firebasestorage.app",
    messagingSenderId: "542254380602",
    appId: "1:542254380602:web:a3dabf0ae5a8a7911be703"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.auth = auth;
  window.fbAuth = {
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  };
</script>

<style>
/* ===== YOUR ORIGINAL CSS (UNCHANGED) ===== */
:root{
  --bg:#0e1625;
  --card:#121826;
  --muted:#9aa4b2;
  --accent:#7c3aed;
  --green:#16a34a;
  --red:#dc2626;
}
body{
  margin:0;
  font-family:Inter,system-ui;
  background:radial-gradient(1200px 600px at top,#1c2a44,var(--bg));
  color:#e5e7eb;
}
.container{max-width:880px;margin:40px auto;padding:24px;}
.header{display:flex;align-items:center;gap:10px;font-size:28px;font-weight:700;}
.sub{margin-top:4px;color:var(--muted);}
.card{background:linear-gradient(180deg,#121826,#0f172a);border-radius:14px;padding:24px;margin-top:20px;box-shadow:0 20px 50px rgba(0,0,0,.45);}
.row{display:flex;gap:16px;margin-bottom:16px;}
.row>*{flex:1}
.field{margin-bottom:16px}
.label{display:block;margin-bottom:6px;color:#cbd5f5;font-size:14px}
input,select{background:#0b1220;border:1px solid #1f2937;color:#e5e7eb;padding:12px;border-radius:10px;font-size:15px;width:100%}
button{background:var(--accent);border:none;color:white;padding:14px;border-radius:12px;font-weight:600;cursor:pointer}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<!-- LOGIN -->
<div id="authSection" class="card">
  <h2>üîê Login / Sign Up</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="signup()">Create Account</button>
  <button onclick="login()" style="background:#374151;margin-top:8px">Login</button>
  <p id="authMsg"></p>
</div>

<div id="userBar" class="card hidden">
  <p>üë§ Logged in as <span id="userEmail"></span></p>
  <button onclick="logout()" style="background:#dc2626">Logout</button>
</div>

<!-- ===== CALCULATOR (UNCHANGED) ===== -->
<div id="config">
  <div class="header">üñ© SpeedDigits Trainer</div>
  <div class="sub">‚öô Configure Your Practice Session</div>
  <div class="card">
    <input id="testName" placeholder="e.g., Morning Practice">
    <select id="operation">
      <option value="add">Addition</option>
      <option value="sub">Subtraction</option>
      <option value="mul">Multiplication</option>
      <option value="div">Division</option>
      <option value="square">Square</option>
      <option value="cube">Cube</option>
      <option value="last1">Last Digit</option>
      <option value="last2">Last Two Digits</option>
    </select>
    <button onclick="startTest()">Start Practice</button>
  </div>
</div>

</div>

<script>
/* ===== AUTH LOGIC (SAFE) ===== */
window.addEventListener("DOMContentLoaded", () => {

  signup = () => {
    fbAuth.createUserWithEmailAndPassword(auth, email.value, password.value)
      .then(()=>authMsg.textContent="Account created")
      .catch(e=>authMsg.textContent=e.message);
  };

  login = () => {
    fbAuth.signInWithEmailAndPassword(auth, email.value, password.value)
      .catch(e=>authMsg.textContent=e.message);
  };

  logout = () => fbAuth.signOut(auth);

  fbAuth.onAuthStateChanged(auth, user=>{
    if(user){
      authSection.classList.add("hidden");
      userBar.classList.remove("hidden");
      userEmail.textContent=user.email;
    }else{
      authSection.classList.remove("hidden");
      userBar.classList.add("hidden");
    }
  });
});
</script>

</body>
</html>
